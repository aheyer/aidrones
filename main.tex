\documentclass[
  paper=a4,                % Papierformat A5 (oder benutze "paperwidth" und "paperheight" für benutzerdefinierte Formate)
  DIV=calc,                % Automatische Berechnung des Satzspiegels
  BCOR=0mm,               % Bindekorrektur (z. B. 10 mm, falls notwendig)
  pagesize,                % Seitenformat in die PDF-Metadaten einfügen
  headinclude=true,        % Kolumnentitel einbeziehen
  footinclude=false,        % Fußzeile nicht einbeziehen
]{scrbook}

% Das "cleardoublepage=current" definiert, dass die Vakantseiten am Ende eines Kapitels
% die gleichen Kopf und Fußzeilen haben wie bisher und nicht komplett leer sind!



% Feineinstellungen des Satzspiegels
\KOMAoptions{
  DIV=11,                  % Anpassung des Satzspiegels (höhere Werte = kleinere Ränder)
  fontsize=11pt,           % Schriftgröße (optional, falls Einfluss auf den Satzspiegel gewünscht)
  twoside=true,            % Für zweiseitigen Druck
}


% Mit Fußzeile
% \usepackage[headtopline,headsepline]{scrlayer-scrpage}
% Ohne Fußzeile
\usepackage[headtopline]{scrlayer-scrpage}

\pdfminorversion=7

\RequirePackage{graphicx}
% Die zuletzte angeben Sprache ist die zu Beginn bereitgestellte Sprache. 
% Will man innerhalb des Dokumentes eine deutschsprachige Bezeichnung haben, 
% wie zum Beispiel Inhaltsverzeichnis anstellen von table of contents, 
% muss german beziehungsweise ngerman an der letzten Stelle stehen. 
% Alternativ zu Beginn des Dokumentes die Sprache auf deutsch umstellen:
% \begin{document}\selectlanguage{german}
\usepackage[ngerman,english]{babel} 
% \RequirePackage{english}
\usepackage[T1]{fontenc}
% \usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage[tbtags,intlimits]{amsmath}
\usepackage{amssymb}
\usepackage{tabularx}
\usepackage{threeparttable}
\usepackage{pdflscape}   % \begin{landscape} ... \end{landscape}
\usepackage{textcomp}
\usepackage{lmodern}
\usepackage{placeins}   % Für \FloatBarrier. Reihenfolge der Bilder und Tabellen bleibt so absolut stabil. Keine falschen Platzierungen mehr.
\usepackage[official]{eurosym}% Eurosymbol: \euro{}
\usepackage{icomma} % Das verhindert einen großen Abstand nach einem Komma in Formeln.
% Quelle: https://texfragen.de/komma_in_formel


% Use the etoolbox package to patch \thebibliography to use \addcontentsline:
% https://tex.stackexchange.com/questions/71129/bibliography-in-table-of-contents
\usepackage{etoolbox}


%% Seitenlayout
\usepackage[
    a4paper,
    twoside,
    left=25mm,
    right=25mm,
    top=30mm,
    bottom=25mm,
    bindingoffset=0mm
]{geometry}

\usepackage{booktabs}   % Das braucht man u.a. in Tabellen für \toprule, \midrule, \bottomrule
\usepackage{colortbl}   % Das braucht man u.a. in Tabellen für \cellcolor{lightgray} 
\usepackage{tocloft}    % Das braucht man u.a. für \newlistof (deutsches TOC)
\usepackage{paracol}
\usepackage{fancyvrb}  % Das braucht man für die Umgebung Verbatim
\usepackage{needspace}
\usepackage{longtable}
\usepackage{float}      % Für den Positionsierungsparameter H
\usepackage{verbatimbox} % Center verbatim
\usepackage[protrusion=true,expansion=true,spacing=false,kerning=true,tracking=true]{microtype}
% Verbesserter Randausgleich (wichtig bei 2-Spalten-Formatierung!)
% \usepackage{pdfcolparallel} % 2-Spalten-Formatierung ermöglichen!
\usepackage{textcase}
\usepackage{calc}%
% \RequirePackage[bottom]{footmisc}
\usepackage{ragged2e}%
\usepackage{caption}
\captionsetup{
  format=plain,
  labelfont=bf,
  font=small,
  justification=justified,
  singlelinecheck=false
}
\usepackage[leftcaption,raggedright]{sidecap}
\RequirePackage[numbers]{natbib}
% \RequirePackage{multicol}
\usepackage{multirow}
\usepackage{makeidx}
\usepackage{framed}%
\usepackage{url}%
\usepackage{setspace}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{out}
\usepackage{imakeidx}
\usepackage{eso-pic}
\usepackage{rotating} % Für \begin{sideways} ... 
\usepackage{spreadtab,booktabs,numprint}  % Für spreadtab Tabellen
\npthousandsep{,}\npdecimalsign{.} % Zahlenformat

%Das ist wichtig für die Synchronisierung der Seitennummern mit dem PDF-Viewer
\usepackage[hidelinks]{hyperref}

% \setlength{\textwidth}{10.8cm}
% \setlength{\textheight}{15.7cm}

\setlength{\textheight}{\textheight+1cm}


\graphicspath{{./images/}}


% \setlength{\parskip}{0ex plus 10mm minus 0.0ex}
\let\upmu\umu
\let\nohline\relax
\sloppy
\hbadness=10000      % Unterdrückt Underfull \hbox bis Badness 10000
\vbadness=10000      % Unterdrückt Underfull \vbox
\emergencystretch=2em % Das gibt LaTeX etwas “Notfall-Dehnung” => weniger Underfulls, ohne sichtbar anders zu setzen.

\newcommand{\colger}{%
\switchcolumn%
\selectlanguage{ngerman}%
}

\newcommand{\coleng}{%
\switchcolumn*%
\selectlanguage{english}%
}

\newcommand{\colende}{%
\end{paracol}%
}

\newcommand{\colstart}{%
\begin{paracol}{2}[]%
\selectlanguage{english}%
}

\newcolumntype{Y}{>{\centering\arraybackslash}X}%

%%% Trennungsregeln für das gesamte Dokument.
%
\hyphenation{
Figure
address
example
However
however
methods
}

% \selectlanguage{english}

\makeindex[name=de,title={Stichwortverzeichnis}]
\makeindex


\newcommand{\makroabschnitt}{
\Needspace{3.5cm}
\section[\englischertitel]{}
\abschnitt{\deutschertitel}
\begin{paracol}{2}[]
\section*{\englischertitel}
\switchcolumn
\section*{\deutschertitel}
\switchcolumn*
\selectlanguage{english}
}

\newcommand{\makrounterabschnitt}{
\Needspace{2.8cm}
\subsection[\englischertitel]{}
\unterabschnitt{\deutschertitel}
\begin{paracol}{2}[]
\subsection*{\englischertitel}
\switchcolumn
\subsection*{\deutschertitel}
\switchcolumn*
\selectlanguage{english}
}


\newcommand{\makrounterunterabschnitt}{
\Needspace{1.5cm}
\begin{paracol}{2}[]
\subsubsection*{\englischertitel}
\switchcolumn
\subsubsection*{\deutschertitel}
\switchcolumn*
\selectlanguage{english}
}



\newcommand{\nombreindice}{Inhaltsverzeichnis}
\newlistof{inhaltsverzeichnis}{deutschestoc}{\nombreindice}

% Die Tilde ist der Abstand zwischen Zahl und Titel im deutschen Inhaltsverzeichnis
% Das vspace fügt im deutschen Inhaltsverzeichnis einen kleinen Abstand unter jedem Kapiteleintrag ein.
% Beim englischen Inhaltsverzeichnis ist es in Kapitel-Datei im \chapter[...
\newcommand\kapitel[1]{%
  \addcontentsline{deutschestoc}{chapter}{\protect{\vspace{2pt}\thechapter}~#1}%
}
\newcommand\abschnitt[1]{%
\addcontentsline{deutschestoc}{section}{{\thesection}~#1}}
\newcommand\unterabschnitt[1]{%
\addcontentsline{deutschestoc}{subsection}{\protect{\thesubsection}~#1}}

% Die Tilde ist der Abstand zwischen Zahl und Titel im englischen Inhaltsverzeichnis
\renewcommand{\numberline}[1]{#1~}


\definecolor{Gray}{gray}{0.9}

\newcommand{\deutschertitel}{}
\newcommand{\englischertitel}{}

% Hurenkinder und Schusterjungen verhindern
\clubpenalty10000
\widowpenalty10000
\displaywidowpenalty=10000
\interlinepenalty=1000

\pagestyle{scrheadings}

\clearpairofpagestyles
\automark[section]{chapter}

% \pagemark = Seitennummer
% \headmark = Kolumnentitel wie Chapter, Section oder Subsection

% \ohead{Kopfzeile außen}
\ohead{\pagemark}
% \chead{Kopfzeile Mitte}
\chead{}
% \ihead{Kopfzeile innen}
\ihead{\headmark}
% \ifoot{Fußzeile innen}
\ifoot{}
% \cfoot{Fußzeile Mitte}
\cfoot{}
% \ofoot{Fußzeile außen}
\ofoot{}


\renewcommand{\chapterpagestyle}{scrheadings}

\begin{document}

% \newcommand{\heute}{2.~September 2019}
\newcommand{\heute}{\today}

% \AddToShipoutPictureBG{%
%   \AtPageUpperLeft{\raisebox{-1cm}{\makebox[\paperwidth]{\huge \texttt{===>} Entwurf vom \heute\ \texttt{<===} }}}%
% %   \AtPageCenter{\rotatebox{52}{\makebox[0pt]{\Huge This is diagonally across the page}}}
% \AtPageLowerLeft{\raisebox{\baselineskip}{\makebox[\paperwidth]{\huge \texttt{===>}  Entwurf vom \heute\ \texttt{<===}}}}
% }

\frontmatter 
% Inhalt der Titelseite
\begin{titlepage}
\thispagestyle{empty}
\centering
  
{\Huge\bfseries AI Drones\par}

\vspace{1cm}

{\Large\bfseries A Bilingual Handbook on the Design, Construction, and Use of AI-Enabled Drones for Scientific and Educational Projects\par}

\vspace{3cm}

{\Huge\bfseries KI-Drohnen\par}

\vspace{1cm}

{\Large\bfseries Ein zweisprachiges Handbuch über Entwurf, Bau und Einsatz von KI-fähigen Drohnen für wissenschaftliche Projekte und Lehre\par}

\vspace{3cm}

{\large Christian Baun, Theodor Bloch, Matthias Deegener, Oliver Hahm, Martin Kappes, Nur Uddun Syeed\par}
  
\vspace{1cm}
  
{\large Frankfurt University of Applied Sciences}
  
\vfill  
  
{\large \today\par}
\end{titlepage}


% \publishers{Frankfurt University of Applied Sciences}

\include{chapter00}  % preface
\cleardoublepage
\tableofcontents
\cleardoublepage
\listofinhaltsverzeichnis
\cleardoublepage
% \markboth{}{}

\mainmatter 
\ihead{\englischertitel} % Ohne diese manuelle Zuweisung ist die Kopfzeile in den folgenden Kapiteln fehlerhaft
\include{chapter01}
\include{chapter02}
\include{chapter03}
\include{chapter04}
\include{chapter05}
\include{chapter06}
\include{chapter07}

% \backmatter 

% \include{Z_0_004_TechnicalTerms}
% \include{glossary}



% % \cleardoublepage
% \phantomsection
% 
% \apptocmd{\thebibliography}{\csname phantomsection\endcsname
% \renewcommand{\bibname}{References}\addcontentsline{toc}{chapter}{References}\addcontentsline{deutschestoc}{chapter}{Literatur}}{}{}
% 
% \include{bibliography}
% 
% 
% \phantomsection
% \cleardoublepage
% 
% \addcontentsline{toc}{chapter}{Index}
% \addcontentsline{deutschestoc}{chapter}{Index}

% \printindex
% \addcontentsline{deutschestoc}{chapter}{Stichwortverzeichnis}
% \printindex[de]
\end{document}
